#!/usr/bin/env python3
import getpass
import genpass
import xerox


TABLE = {
    1: {
        'name': 'google',
        'nonce': '2013-10-09: nonce for google',
    },
    2: {
        'name': 'dropbox',
        'nonce': '2013-10-09: nonce for dropbox',
    },
    3: {
        'name': 'GnuPG',
        'nonce': '2013-10-11: nonce for GnuPG',
        'salt': 'GnuPGSalt',
        'iterations': 0x20000,
    },
}


def get_item():
    for i in sorted(TABLE.keys()):
        print('({}) {}'.format(i, TABLE[i]['name']))
    selection = getpass.getpass('Selection:')
    selection = int(selection)
    return TABLE[selection]


def main():
    item = get_item()
    password = getpass.getpass('Enter password:')
    param = {}
    for key in ('nonce', 'salt', 'iterations'):
        if key in item:
            param[key] = item[key]
    result = genpass.genpass(password, **param)
    xerox.copy(result)
    print('Password for {} is copied to clipboard'.format(item['name']))


if __name__ == '__main__':
    main()
